{"version":3,"file":"index-BmeHgwPw.js","sources":["../../src/dragAndDrop.js","../../../node_modules/three/examples/jsm/loaders/OBJLoader.js","../../../src/urdf-viewer-element.js","../../../src/urdf-manipulator-element.js","../../src/index.js"],"sourcesContent":["// Converts a datatransfer structer into an object with all paths and files\n// listed out. Returns a promise that resolves with the file structure.\nfunction dataTransferToFiles(dataTransfer) {\n\n    if (!(dataTransfer instanceof DataTransfer)) {\n\n        throw new Error('Data must be of type \"DataTransfer\"', dataTransfer);\n\n    }\n\n    const files = {};\n\n    // recurse down the webkit file structure resolving\n    // the paths to files names to store in the `files`\n    // object\n    function recurseDirectory(item) {\n\n        if (item.isFile) {\n\n            return new Promise(resolve => {\n                item.file(file => {\n                    files[item.fullPath] = file;\n                    resolve();\n                });\n            });\n\n        } else {\n\n            const reader = item.createReader();\n\n            return new Promise(resolve => {\n\n                const promises = [];\n\n                // exhaustively read all the directory entries\n                function readNextEntries() {\n\n                    reader.readEntries(et => {\n\n                        if (et.length === 0) {\n\n                            Promise.all(promises).then(() => resolve());\n\n                        } else {\n\n                            et.forEach(e => {\n\n                                promises.push(recurseDirectory(e));\n\n                            });\n                            readNextEntries();\n\n                        }\n\n                    });\n\n                }\n\n                readNextEntries();\n\n            });\n        }\n    }\n\n    return new Promise(resolve => {\n\n        // Traverse down the tree and add the files into the zip\n        const dtitems = dataTransfer.items && [...dataTransfer.items];\n        const dtfiles = [...dataTransfer.files];\n\n        if (dtitems && dtitems.length && dtitems[0].webkitGetAsEntry) {\n\n            const promises = [];\n            for (let i = 0; i < dtitems.length; i++) {\n                const item = dtitems[i];\n                const entry = item.webkitGetAsEntry();\n\n                promises.push(recurseDirectory(entry));\n\n            }\n            Promise.all(promises).then(() => resolve(files));\n\n        } else {\n\n            // add a '/' prefix to math the file directory entry\n            // on webkit browsers\n            dtfiles\n                .filter(f => f.size !== 0)\n                .forEach(f => files['/' + f.name] = f);\n\n            resolve(files);\n\n        }\n    });\n}\nexport function registerDragEvents(viewer, callback) {\n\n    document.addEventListener('dragover', e => e.preventDefault());\n    document.addEventListener('dragenter', e => e.preventDefault());\n    document.addEventListener('drop', e => {\n\n        e.preventDefault();\n\n        // convert the files\n        dataTransferToFiles(e.dataTransfer)\n            .then(files => {\n\n                // removes '..' and '.' tokens and normalizes slashes\n                const cleanFilePath = path => {\n\n                    return path\n                        .replace(/\\\\/g, '/')\n                        .split(/\\//g)\n                        .reduce((acc, el) => {\n\n                            if (el === '..') acc.pop();\n                            else if (el !== '.') acc.push(el);\n                            return acc;\n\n                        }, [])\n                        .join('/');\n\n                };\n\n                // set the loader url modifier to check the list\n                // of files\n                const fileNames = Object.keys(files).map(n => cleanFilePath(n));\n                viewer.urlModifierFunc = url => {\n\n                    // find the matching file given the requested url\n                    const cleaned = cleanFilePath(url.replace(viewer.package, ''));\n                    const fileName = fileNames\n                        .filter(name => {\n\n                            // check if the end of file and url are the same\n                            const len = Math.min(name.length, cleaned.length);\n                            return cleaned.substr(cleaned.length - len) === name.substr(name.length - len);\n\n                        }).pop();\n\n                    if (fileName !== undefined) {\n\n                        // revoke the url after it's been used\n                        const bloburl = URL.createObjectURL(files[fileName]);\n                        requestAnimationFrame(() => URL.revokeObjectURL(bloburl));\n\n                        return bloburl;\n\n                    }\n\n                    return url;\n\n                };\n\n                // set the source of the element to the most likely intended display model\n                const filesNames = Object.keys(files);\n                viewer.up = '+Z';\n                document.getElementById('up-select').value = viewer.up;\n\n                // filter all files ending in urdf\n                const availableModels = fileNames.filter(n => /urdf$/i.test(n));\n                // remove existing entries from #urdf-options\n                const urdfOptionsContainer = document.querySelector('#urdf-options');\n                while (urdfOptionsContainer.firstChild) {\n                    urdfOptionsContainer.removeChild(urdfOptionsContainer.firstChild);\n                }\n\n                // create new entries in #urdf-options\n                availableModels.forEach(model => {\n                    const li = document.createElement('li');\n                    li.setAttribute('urdf', model);\n                    li.setAttribute('color', '#263238');\n                    // extract filename from full path\n                    li.textContent = model.split(/[\\\\\\/]/).pop();\n                    urdfOptionsContainer.appendChild(li);\n                });\n\n                viewer.urdf =\n                    filesNames\n                        .filter(n => /urdf$/i.test(n))\n                        .shift();\n\n            }).then(() => callback());\n\n    });\n\n}\n","import {\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLineBasicMaterial,\n\tLineSegments,\n\tLoader,\n\tMaterial,\n\tMesh,\n\tMeshPhongMaterial,\n\tPoints,\n\tPointsMaterial,\n\tVector3,\n\tColor\n} from 'three';\n\n// o object_name | g group_name\nconst _object_pattern = /^[og]\\s*(.+)?/;\n// mtllib file_reference\nconst _material_library_pattern = /^mtllib /;\n// usemtl material_name\nconst _material_use_pattern = /^usemtl /;\n// usemap map_name\nconst _map_use_pattern = /^usemap /;\nconst _face_vertex_data_separator_pattern = /\\s+/;\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _ab = new Vector3();\nconst _cb = new Vector3();\n\nconst _color = new Color();\n\nfunction ParserState() {\n\n\tconst state = {\n\t\tobjects: [],\n\t\tobject: {},\n\n\t\tvertices: [],\n\t\tnormals: [],\n\t\tcolors: [],\n\t\tuvs: [],\n\n\t\tmaterials: {},\n\t\tmaterialLibraries: [],\n\n\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\tthis.object.name = name;\n\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t\tthis.object = {\n\t\t\t\tname: name || '',\n\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\n\n\t\t\t\tgeometry: {\n\t\t\t\t\tvertices: [],\n\t\t\t\t\tnormals: [],\n\t\t\t\t\tcolors: [],\n\t\t\t\t\tuvs: [],\n\t\t\t\t\thasUVIndices: false\n\t\t\t\t},\n\t\t\t\tmaterials: [],\n\t\t\t\tsmooth: true,\n\n\t\t\t\tstartMaterial: function ( name, libraries ) {\n\n\t\t\t\t\tconst previous = this._finalize( false );\n\n\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst material = {\n\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\tclone: function ( index ) {\n\n\t\t\t\t\t\t\tconst cloned = {\n\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\n\t\t\t\t\t\t\treturn cloned;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\treturn material;\n\n\t\t\t\t},\n\n\t\t\t\tcurrentMaterial: function () {\n\n\t\t\t\t\tif ( this.materials.length > 0 ) {\n\n\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t},\n\n\t\t\t\t_finalize: function ( end ) {\n\n\t\t\t\t\tconst lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\n\n\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\tfor ( let mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\n\n\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\tthis.materials.push( {\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Inherit previous objects material.\n\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n\t\t\t\tconst declared = previousMaterial.clone( 0 );\n\t\t\t\tdeclared.inherited = true;\n\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t}\n\n\t\t\tthis.objects.push( this.object );\n\n\t\t},\n\n\t\tfinalize: function () {\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t},\n\n\t\taddVertex: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddVertexPoint: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddVertexLine: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.normals;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddFaceNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\t_vA.fromArray( src, a );\n\t\t\t_vB.fromArray( src, b );\n\t\t\t_vC.fromArray( src, c );\n\n\t\t\t_cb.subVectors( _vC, _vB );\n\t\t\t_ab.subVectors( _vA, _vB );\n\t\t\t_cb.cross( _ab );\n\n\t\t\t_cb.normalize();\n\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\n\t\t},\n\n\t\taddColor: function ( a, b, c ) {\n\n\t\t\tconst src = this.colors;\n\t\t\tconst dst = this.object.geometry.colors;\n\n\t\t\tif ( src[ a ] !== undefined ) dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tif ( src[ b ] !== undefined ) dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tif ( src[ c ] !== undefined ) dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddUV: function ( a, b, c ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\n\n\t\t},\n\n\t\taddDefaultUV: function () {\n\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\n\t\t},\n\n\t\taddUVLine: function ( a ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\n\t\t},\n\n\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tlet ia = this.parseVertexIndex( a, vLen );\n\t\t\tlet ib = this.parseVertexIndex( b, vLen );\n\t\t\tlet ic = this.parseVertexIndex( c, vLen );\n\n\t\t\tthis.addVertex( ia, ib, ic );\n\t\t\tthis.addColor( ia, ib, ic );\n\n\t\t\t// normals\n\n\t\t\tif ( na !== undefined && na !== '' ) {\n\n\t\t\t\tconst nLen = this.normals.length;\n\n\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\t\t\t\tib = this.parseNormalIndex( nb, nLen );\n\t\t\t\tic = this.parseNormalIndex( nc, nLen );\n\n\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t} else {\n\n\t\t\t\tthis.addFaceNormal( ia, ib, ic );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( ua !== undefined && ua !== '' ) {\n\n\t\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\tthis.object.geometry.hasUVIndices = true;\n\n\t\t\t} else {\n\n\t\t\t\t// add placeholder values (for inconsistent face definitions)\n\n\t\t\t\tthis.addDefaultUV();\n\n\t\t\t}\n\n\t\t},\n\n\t\taddPointGeometry: function ( vertices ) {\n\n\t\t\tthis.object.geometry.type = 'Points';\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tconst index = this.parseVertexIndex( vertices[ vi ], vLen );\n\n\t\t\t\tthis.addVertexPoint( index );\n\t\t\t\tthis.addColor( index );\n\n\t\t\t}\n\n\t\t},\n\n\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\tconst vLen = this.vertices.length;\n\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t}\n\n\t\t\tfor ( let uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tstate.startObject( '', false );\n\n\treturn state;\n\n}\n\n//\n\nclass OBJLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.materials = null;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tsetMaterials( materials ) {\n\n\t\tthis.materials = materials;\n\n\t\treturn this;\n\n\t}\n\n\tparse( text ) {\n\n\t\tconst state = new ParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t}\n\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\n\n\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t}\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet result = [];\n\n\t\tfor ( let i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tconst line = lines[ i ].trimStart();\n\n\t\t\tif ( line.length === 0 ) continue;\n\n\t\t\tconst lineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue; // skip comments\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tconst data = line.split( _face_vertex_data_separator_pattern );\n\n\t\t\t\tswitch ( data[ 0 ] ) {\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( data.length >= 7 ) {\n\n\t\t\t\t\t\t\t_color.setRGB(\n\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] )\n\t\t\t\t\t\t\t).convertSRGBToLinear();\n\n\t\t\t\t\t\t\tstate.colors.push( _color.r, _color.g, _color.b );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if no colors are defined, add placeholders so color and vertex indices match\n\n\t\t\t\t\t\t\tstate.colors.push( undefined, undefined, undefined );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'f' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst vertexData = lineData.split( _face_vertex_data_separator_pattern );\n\t\t\t\tconst faceVertices = [];\n\n\t\t\t\t// Parse the face vertex data into an easy to work with format\n\n\t\t\t\tfor ( let j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst vertex = vertexData[ j ];\n\n\t\t\t\t\tif ( vertex.length > 0 ) {\n\n\t\t\t\t\t\tconst vertexParts = vertex.split( '/' );\n\t\t\t\t\t\tfaceVertices.push( vertexParts );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n\t\t\t\tconst v1 = faceVertices[ 0 ];\n\n\t\t\t\tfor ( let j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n\t\t\t\t\tconst v2 = faceVertices[ j ];\n\t\t\t\t\tconst v3 = faceVertices[ j + 1 ];\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\n\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\n\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'l' ) {\n\n\t\t\t\tconst lineParts = line.substring( 1 ).trim().split( ' ' );\n\t\t\t\tlet lineVertices = [];\n\t\t\t\tconst lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( '/' ) === - 1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tconst parts = lineParts[ li ].split( '/' );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== '' ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== '' ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( lineFirstChar === 'p' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst pointData = lineData.split( ' ' );\n\n\t\t\t\tstate.addPointGeometry( pointData );\n\n\t\t\t} else if ( ( result = _object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t// let name = result[ 0 ].slice( 1 ).trim();\n\t\t\t\tconst name = ( ' ' + result[ 0 ].slice( 1 ).trim() ).slice( 1 );\n\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( _material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( _material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( _map_use_pattern.test( line ) ) {\n\n\t\t\t\t// the line is parsed but ignored since the loader assumes textures are defined MTL files\n\t\t\t\t// (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n\t\t\t} else if ( lineFirstChar === 's' ) {\n\n\t\t\t\tresult = line.split( ' ' );\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n\t\t\t\tif ( result.length > 1 ) {\n\n\t\t\t\t\tconst value = result[ 1 ].trim().toLowerCase();\n\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\n\t\t\t\t\tstate.object.smooth = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst material = state.object.currentMaterial();\n\t\t\t\tif ( material ) material.smooth = state.object.smooth;\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tconst container = new Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tconst hasPrimitives = ! ( state.objects.length === 1 && state.objects[ 0 ].geometry.vertices.length === 0 );\n\n\t\tif ( hasPrimitives === true ) {\n\n\t\t\tfor ( let i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\t\tconst object = state.objects[ i ];\n\t\t\t\tconst geometry = object.geometry;\n\t\t\t\tconst materials = object.materials;\n\t\t\t\tconst isLine = ( geometry.type === 'Line' );\n\t\t\t\tconst isPoints = ( geometry.type === 'Points' );\n\t\t\t\tlet hasVertexColors = false;\n\n\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( geometry.vertices, 3 ) );\n\n\t\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'normal', new Float32BufferAttribute( geometry.normals, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\t\thasVertexColors = true;\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( geometry.colors, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.hasUVIndices === true ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'uv', new Float32BufferAttribute( geometry.uvs, 2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Create materials\n\n\t\t\t\tconst createdMaterials = [];\n\n\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\tconst materialHash = sourceMaterial.name + '_' + sourceMaterial.smooth + '_' + hasVertexColors;\n\t\t\t\t\tlet material = state.materials[ materialHash ];\n\n\t\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\tif ( isLine && material && ! ( material instanceof LineBasicMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialLine = new LineBasicMaterial();\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialLine, material );\n\t\t\t\t\t\t\tmaterialLine.color.copy( material.color );\n\t\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t\t} else if ( isPoints && material && ! ( material instanceof PointsMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialPoints = new PointsMaterial( { size: 10, sizeAttenuation: false } );\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialPoints, material );\n\t\t\t\t\t\t\tmaterialPoints.color.copy( material.color );\n\t\t\t\t\t\t\tmaterialPoints.map = material.map;\n\t\t\t\t\t\t\tmaterial = materialPoints;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmaterial = new LineBasicMaterial();\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmaterial = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\t\t\t\t\t\tmaterial.vertexColors = hasVertexColors;\n\n\t\t\t\t\t\tstate.materials[ materialHash ] = material;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcreatedMaterials.push( material );\n\n\t\t\t\t}\n\n\t\t\t\t// Create mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = object.name;\n\n\t\t\t\tcontainer.add( mesh );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// if there is only the default parser state object with no geometry data, interpret data as point cloud\n\n\t\t\tif ( state.vertices.length > 0 ) {\n\n\t\t\t\tconst material = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( state.vertices, 3 ) );\n\n\t\t\t\tif ( state.colors.length > 0 && state.colors[ 0 ] !== undefined ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( state.colors, 3 ) );\n\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst points = new Points( buffergeometry, material );\n\t\t\t\tcontainer.add( points );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\n\t}\n\n}\n\nexport { OBJLoader };\n","import * as THREE from 'three';\nimport { MeshPhongMaterial } from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport URDFLoader from './URDFLoader.js';\n\nconst tempVec2 = new THREE.Vector2();\nconst emptyRaycast = () => {};\n\n// urdf-viewer element\n// Loads and displays a 3D view of a URDF-formatted robot\n\n// Events\n// urdf-change: Fires when the URDF has finished loading and getting processed\n// urdf-processed: Fires when the URDF has finished loading and getting processed\n// geometry-loaded: Fires when all the geometry has been fully loaded\n// ignore-limits-change: Fires when the 'ignore-limits' attribute changes\n// angle-change: Fires when an angle changes\nexport default\nclass URDFViewer extends HTMLElement {\n\n    static get observedAttributes() {\n\n        return ['package', 'urdf', 'up', 'display-shadow', 'ambient-color', 'ignore-limits', 'show-collision'];\n\n    }\n\n    get package() { return this.getAttribute('package') || ''; }\n    set package(val) { this.setAttribute('package', val); }\n\n    get urdf() { return this.getAttribute('urdf') || ''; }\n    set urdf(val) { this.setAttribute('urdf', val); }\n\n    get ignoreLimits() { return this.hasAttribute('ignore-limits') || false; }\n    set ignoreLimits(val) { val ? this.setAttribute('ignore-limits', val) : this.removeAttribute('ignore-limits'); }\n\n    get up() { return this.getAttribute('up') || '+Z'; }\n    set up(val) { this.setAttribute('up', val); }\n\n    get displayShadow() { return this.hasAttribute('display-shadow') || false; }\n    set displayShadow(val) { val ? this.setAttribute('display-shadow', '') : this.removeAttribute('display-shadow'); }\n\n    get ambientColor() { return this.getAttribute('ambient-color') || '#8ea0a8'; }\n    set ambientColor(val) { val ? this.setAttribute('ambient-color', val) : this.removeAttribute('ambient-color'); }\n\n    get autoRedraw() { return this.hasAttribute('auto-redraw') || false; }\n    set autoRedraw(val) { val ? this.setAttribute('auto-redraw', true) : this.removeAttribute('auto-redraw'); }\n\n    get noAutoRecenter() { return this.hasAttribute('no-auto-recenter') || false; }\n    set noAutoRecenter(val) { val ? this.setAttribute('no-auto-recenter', true) : this.removeAttribute('no-auto-recenter'); }\n\n    get showCollision() { return this.hasAttribute('show-collision') || false; }\n    set showCollision(val) { val ? this.setAttribute('show-collision', true) : this.removeAttribute('show-collision'); }\n\n    get jointValues() {\n\n        const values = {};\n        if (this.robot) {\n\n            for (const name in this.robot.joints) {\n\n                const joint = this.robot.joints[name];\n                values[name] = joint.jointValue.length === 1 ? joint.angle : [...joint.jointValue];\n\n            }\n\n        }\n\n        return values;\n\n    }\n    set jointValues(val) { this.setJointValues(val); }\n\n    get angles() {\n\n        return this.jointValues;\n\n    }\n    set angles(v) {\n\n        this.jointValues = v;\n\n    }\n\n    /* Lifecycle Functions */\n    constructor() {\n\n        super();\n\n        this._requestId = 0;\n        this._dirty = false;\n        this._loadScheduled = false;\n        this.robot = null;\n        this.loadMeshFunc = null;\n        this.urlModifierFunc = null;\n\n        // Scene setup\n        const scene = new THREE.Scene();\n\n        const ambientLight = new THREE.HemisphereLight(this.ambientColor, '#000');\n        ambientLight.groundColor.lerp(ambientLight.color, 0.5 * Math.PI);\n        ambientLight.intensity = 0.5;\n        ambientLight.position.set(0, 1, 0);\n        scene.add(ambientLight);\n\n        // Light setup\n        const dirLight = new THREE.DirectionalLight(0xffffff, Math.PI);\n        dirLight.position.set(4, 10, 1);\n        dirLight.shadow.mapSize.width = 2048;\n        dirLight.shadow.mapSize.height = 2048;\n        dirLight.shadow.normalBias = 0.001;\n        dirLight.castShadow = true;\n        scene.add(dirLight);\n        scene.add(dirLight.target);\n\n        // Renderer setup\n        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n        renderer.setClearColor(0xffffff);\n        renderer.setClearAlpha(0);\n        renderer.shadowMap.enabled = true;\n        renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n        renderer.outputColorSpace = THREE.SRGBColorSpace;\n\n        // Camera setup\n        const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);\n        camera.position.z = -10;\n\n        // World setup\n        const world = new THREE.Object3D();\n        scene.add(world);\n\n        const plane = new THREE.Mesh(\n            new THREE.PlaneGeometry(40, 40),\n            new THREE.ShadowMaterial({ side: THREE.DoubleSide, transparent: true, opacity: 0.25 }),\n        );\n        plane.rotation.x = -Math.PI / 2;\n        plane.position.y = -0.5;\n        plane.receiveShadow = true;\n        plane.scale.set(10, 10, 10);\n        scene.add(plane);\n\n        // Controls setup\n        const controls = new OrbitControls(camera, renderer.domElement);\n        controls.rotateSpeed = 2.0;\n        controls.zoomSpeed = 5;\n        controls.panSpeed = 2;\n        controls.enableZoom = true;\n        controls.enableDamping = false;\n        controls.maxDistance = 50;\n        controls.minDistance = 0.25;\n        controls.addEventListener('change', () => this.recenter());\n\n        this.scene = scene;\n        this.world = world;\n        this.renderer = renderer;\n        this.camera = camera;\n        this.controls = controls;\n        this.plane = plane;\n        this.directionalLight = dirLight;\n        this.ambientLight = ambientLight;\n\n        this._setUp(this.up);\n\n        this._collisionMaterial = new MeshPhongMaterial({\n            transparent: true,\n            opacity: 0.35,\n            shininess: 2.5,\n            premultipliedAlpha: true,\n            color: 0xffbe38,\n            polygonOffset: true,\n            polygonOffsetFactor: -1,\n            polygonOffsetUnits: -1,\n        });\n\n        const _renderLoop = () => {\n\n            if (this.parentNode) {\n\n                this.updateSize();\n\n                if (this._dirty || this.autoRedraw) {\n\n                    if (!this.noAutoRecenter) {\n\n                        this._updateEnvironment();\n                    }\n\n                    this.renderer.render(scene, camera);\n                    this._dirty = false;\n\n                }\n\n                // update controls after the environment in\n                // case the controls are retargeted\n                this.controls.update();\n\n            }\n            this._renderLoopId = requestAnimationFrame(_renderLoop);\n\n        };\n        _renderLoop();\n\n    }\n\n    connectedCallback() {\n\n        // Add our initialize styles for the element if they haven't\n        // been added yet\n        if (!this.constructor._styletag) {\n\n            const styletag = document.createElement('style');\n            styletag.innerHTML =\n            `\n                ${ this.tagName } { display: block; }\n                ${ this.tagName } canvas {\n                    width: 100%;\n                    height: 100%;\n                }\n            `;\n            document.head.appendChild(styletag);\n            this.constructor._styletag = styletag;\n\n        }\n\n        // add the renderer\n        if (this.childElementCount === 0) {\n\n            this.appendChild(this.renderer.domElement);\n\n        }\n\n        this.updateSize();\n        requestAnimationFrame(() => this.updateSize());\n\n    }\n\n    disconnectedCallback() {\n\n        cancelAnimationFrame(this._renderLoopId);\n\n    }\n\n    attributeChangedCallback(attr, oldval, newval) {\n\n        this._updateCollisionVisibility();\n        if (!this.noAutoRecenter) {\n            this.recenter();\n        }\n\n        switch (attr) {\n\n            case 'package':\n            case 'urdf': {\n\n                this._scheduleLoad();\n                break;\n\n            }\n\n            case 'up': {\n\n                this._setUp(this.up);\n                break;\n\n            }\n\n            case 'ambient-color': {\n\n                this.ambientLight.color.set(this.ambientColor);\n                this.ambientLight.groundColor.set('#000').lerp(this.ambientLight.color, 0.5);\n                break;\n\n            }\n\n            case 'ignore-limits': {\n\n                this._setIgnoreLimits(this.ignoreLimits, true);\n                break;\n\n            }\n\n        }\n\n    }\n\n    /* Public API */\n    updateSize() {\n\n        const r = this.renderer;\n        const w = this.clientWidth;\n        const h = this.clientHeight;\n        const currSize = r.getSize(tempVec2);\n\n        if (currSize.width !== w || currSize.height !== h) {\n\n            this.recenter();\n\n        }\n\n        r.setPixelRatio(window.devicePixelRatio);\n        r.setSize(w, h, false);\n\n        this.camera.aspect = w / h;\n        this.camera.updateProjectionMatrix();\n\n    }\n\n    redraw() {\n\n        this._dirty = true;\n    }\n\n    recenter() {\n\n        this._updateEnvironment();\n        this.redraw();\n\n    }\n\n    // Set the joint with jointName to\n    // angle in degrees\n    setJointValue(jointName, ...values) {\n\n        if (!this.robot) return;\n        if (!this.robot.joints[jointName]) return;\n\n        if (this.robot.joints[jointName].setJointValue(...values)) {\n\n            this.redraw();\n            this.dispatchEvent(new CustomEvent('angle-change', { bubbles: true, cancelable: true, detail: jointName }));\n\n        }\n\n    }\n\n    setJointValues(values) {\n\n        for (const name in values) {\n\n            if (Array.isArray(values[name])) {\n\n                this.setJointValue(name, ...values[name]);\n\n            } else {\n\n                this.setJointValue(name, values[name]);\n\n            }\n\n        }\n\n    }\n\n    /* Private Functions */\n    // Updates the position of the plane to be at the\n    // lowest point below the robot and focuses the\n    // camera on the center of the scene\n    _updateEnvironment() {\n\n        const robot = this.robot;\n        if (!robot) return;\n\n        this.world.updateMatrixWorld();\n\n        const bbox = new THREE.Box3();\n        bbox.makeEmpty();\n        robot.traverse(c => {\n            if (c.isURDFVisual) {\n                bbox.expandByObject(c);\n            }\n        });\n\n        const center = bbox.getCenter(new THREE.Vector3());\n        this.controls.target.y = center.y;\n        this.plane.position.y = bbox.min.y - 1e-3;\n\n        const dirLight = this.directionalLight;\n        dirLight.castShadow = this.displayShadow;\n\n        if (this.displayShadow) {\n\n            // Update the shadow camera rendering bounds to encapsulate the\n            // model. We use the bounding sphere of the bounding box for\n            // simplicity -- this could be a tighter fit.\n            const sphere = bbox.getBoundingSphere(new THREE.Sphere());\n            const minmax = sphere.radius;\n            const cam = dirLight.shadow.camera;\n            cam.left = cam.bottom = -minmax;\n            cam.right = cam.top = minmax;\n\n            // Update the camera to focus on the center of the model so the\n            // shadow can encapsulate it\n            const offset = dirLight.position.clone().sub(dirLight.target.position);\n            dirLight.target.position.copy(center);\n            dirLight.position.copy(center).add(offset);\n\n            cam.updateProjectionMatrix();\n\n        }\n\n    }\n\n    _scheduleLoad() {\n\n        // if our current model is already what's being requested\n        // or has been loaded then early out\n        if (this._prevload === `${ this.package }|${ this.urdf }`) return;\n        this._prevload = `${ this.package }|${ this.urdf }`;\n\n        // if we're already waiting on a load then early out\n        if (this._loadScheduled) return;\n        this._loadScheduled = true;\n\n        if (this.robot) {\n\n            this.robot.traverse(c => c.dispose && c.dispose());\n            this.robot.parent.remove(this.robot);\n            this.robot = null;\n\n        }\n\n        requestAnimationFrame(() => {\n\n            this._loadUrdf(this.package, this.urdf);\n            this._loadScheduled = false;\n\n        });\n\n    }\n\n    // Watch the package and urdf field and load the robot model.\n    // This should _only_ be called from _scheduleLoad because that\n    // ensures the that current robot has been removed\n    _loadUrdf(pkg, urdf) {\n\n        this.dispatchEvent(new CustomEvent('urdf-change', { bubbles: true, cancelable: true, composed: true }));\n\n        if (urdf) {\n\n            // Keep track of this request and make\n            // sure it doesn't get overwritten by\n            // a subsequent one\n            this._requestId++;\n            const requestId = this._requestId;\n\n            const updateMaterials = mesh => {\n\n                mesh.traverse(c => {\n\n                    if (c.isMesh) {\n\n                        c.castShadow = true;\n                        c.receiveShadow = true;\n\n                        if (c.material) {\n\n                            const mats =\n                                (Array.isArray(c.material) ? c.material : [c.material])\n                                    .map(m => {\n\n                                        if (m instanceof THREE.MeshBasicMaterial) {\n\n                                            m = new THREE.MeshPhongMaterial();\n\n                                        }\n\n                                        if (m.map) {\n\n                                            m.map.colorSpace = THREE.SRGBColorSpace;\n\n                                        }\n\n                                        return m;\n\n                                    });\n                            c.material = mats.length === 1 ? mats[0] : mats;\n\n                        }\n\n                    }\n\n                });\n\n            };\n\n            if (pkg.includes(':') && (pkg.split(':')[1].substring(0, 2)) !== '//') {\n                // E.g. pkg = \"pkg_name: path/to/pkg_name, pk2: path2/to/pk2\"}\n\n                // Convert pkg(s) into a map. E.g.\n                // { \"pkg_name\": \"path/to/pkg_name\",\n                //   \"pk2\":      \"path2/to/pk2\"      }\n\n                pkg = pkg.split(',').reduce((map, value) => {\n\n                    const split = value.split(/:/).filter(x => !!x);\n                    const pkgName = split.shift().trim();\n                    const pkgPath = split.join(':').trim();\n                    map[pkgName] = pkgPath;\n\n                    return map;\n\n                }, {});\n            }\n\n            let robot = null;\n            const manager = new THREE.LoadingManager();\n            manager.onLoad = () => {\n\n                // If another request has come in to load a new\n                // robot, then ignore this one\n                if (this._requestId !== requestId) {\n\n                    robot.traverse(c => c.dispose && c.dispose());\n                    return;\n\n                }\n\n                this.robot = robot;\n                this.world.add(robot);\n                updateMaterials(robot);\n\n                this._setIgnoreLimits(this.ignoreLimits);\n                this._updateCollisionVisibility();\n\n                this.dispatchEvent(new CustomEvent('urdf-processed', { bubbles: true, cancelable: true, composed: true }));\n                this.dispatchEvent(new CustomEvent('geometry-loaded', { bubbles: true, cancelable: true, composed: true }));\n\n                this.recenter();\n\n            };\n\n            if (this.urlModifierFunc) {\n\n                manager.setURLModifier(this.urlModifierFunc);\n\n            }\n\n            const loader = new URDFLoader(manager);\n            loader.packages = pkg;\n            loader.loadMeshCb = this.loadMeshFunc;\n            loader.fetchOptions = { mode: 'cors', credentials: 'same-origin' };\n            loader.parseCollision = true;\n            loader.load(urdf, model => robot = model);\n\n        }\n\n    }\n\n    _updateCollisionVisibility() {\n\n        const showCollision = this.showCollision;\n        const collisionMaterial = this._collisionMaterial;\n        const robot = this.robot;\n\n        if (robot === null) return;\n\n        const colliders = [];\n        robot.traverse(c => {\n\n            if (c.isURDFCollider) {\n\n                c.visible = showCollision;\n                colliders.push(c);\n\n            }\n\n        });\n\n        colliders.forEach(coll => {\n\n            coll.traverse(c => {\n\n                if (c.isMesh) {\n\n                    c.raycast = emptyRaycast;\n                    c.material = collisionMaterial;\n                    c.castShadow = false;\n\n                }\n\n            });\n\n        });\n\n    }\n\n    // Watch the coordinate frame and update the\n    // rotation of the scene to match\n    _setUp(up) {\n\n        if (!up) up = '+Z';\n        up = up.toUpperCase();\n        const sign = up.replace(/[^-+]/g, '')[0] || '+';\n        const axis = up.replace(/[^XYZ]/gi, '')[0] || 'Z';\n\n        const PI = Math.PI;\n        const HALFPI = PI / 2;\n        if (axis === 'X') this.world.rotation.set(0, 0, sign === '+' ? HALFPI : -HALFPI);\n        if (axis === 'Z') this.world.rotation.set(sign === '+' ? -HALFPI : HALFPI, 0, 0);\n        if (axis === 'Y') this.world.rotation.set(sign === '+' ? 0 : PI, 0, 0);\n\n    }\n\n    // Updates the current robot's angles to ignore\n    // joint limits or not\n    _setIgnoreLimits(ignore, dispatch = false) {\n\n        if (this.robot) {\n\n            Object\n                .values(this.robot.joints)\n                .forEach(joint => {\n\n                    joint.ignoreLimits = ignore;\n                    joint.setJointValue(...joint.jointValue);\n\n                });\n\n        }\n\n        if (dispatch) {\n\n            this.dispatchEvent(new CustomEvent('ignore-limits-change', { bubbles: true, cancelable: true, composed: true }));\n\n        }\n\n    }\n\n};\n","import * as THREE from 'three';\nimport URDFViewer from './urdf-viewer-element.js';\nimport { PointerURDFDragControls } from './URDFDragControls.js';\n\n// urdf-manipulator element\n// Displays a URDF model that can be manipulated with the mouse\n\n// Events\n// joint-mouseover: Fired when a joint is hovered over\n// joint-mouseout: Fired when a joint is no longer hovered over\n// manipulate-start: Fires when a joint is manipulated\n// manipulate-end: Fires when a joint is done being manipulated\nexport default\nclass URDFManipulator extends URDFViewer {\n\n    static get observedAttributes() {\n\n        return ['highlight-color', ...super.observedAttributes];\n\n    }\n\n    get disableDragging() { return this.hasAttribute('disable-dragging'); }\n    set disableDragging(val) { val ? this.setAttribute('disable-dragging', !!val) : this.removeAttribute('disable-dragging'); }\n\n    get highlightColor() { return this.getAttribute('highlight-color') || '#FFFFFF'; }\n    set highlightColor(val) { val ? this.setAttribute('highlight-color', val) : this.removeAttribute('highlight-color'); }\n\n    constructor(...args) {\n\n        super(...args);\n\n        // The highlight material\n        this.highlightMaterial =\n            new THREE.MeshPhongMaterial({\n                shininess: 10,\n                color: this.highlightColor,\n                emissive: this.highlightColor,\n                emissiveIntensity: 0.25,\n            });\n\n        const isJoint = j => {\n\n            return j.isURDFJoint && j.jointType !== 'fixed';\n\n        };\n\n        // Highlight the link geometry under a joint\n        const highlightLinkGeometry = (m, revert) => {\n\n            const traverse = c => {\n\n                // Set or revert the highlight color\n                if (c.type === 'Mesh') {\n\n                    if (revert) {\n\n                        c.material = c.__origMaterial;\n                        delete c.__origMaterial;\n\n                    } else {\n\n                        c.__origMaterial = c.material;\n                        c.material = this.highlightMaterial;\n\n                    }\n\n                }\n\n                // Look into the children and stop if the next child is\n                // another joint\n                if (c === m || !isJoint(c)) {\n\n                    for (let i = 0; i < c.children.length; i++) {\n\n                        const child = c.children[i];\n                        if (!child.isURDFCollider) {\n\n                            traverse(c.children[i]);\n\n                        }\n\n                    }\n\n                }\n\n            };\n\n            traverse(m);\n\n        };\n\n        const el = this.renderer.domElement;\n\n        const dragControls = new PointerURDFDragControls(this.scene, this.camera, el);\n        dragControls.onDragStart = joint => {\n\n            this.dispatchEvent(new CustomEvent('manipulate-start', { bubbles: true, cancelable: true, detail: joint.name }));\n            this.controls.enabled = false;\n            this.redraw();\n\n        };\n        dragControls.onDragEnd = joint => {\n\n            this.dispatchEvent(new CustomEvent('manipulate-end', { bubbles: true, cancelable: true, detail: joint.name }));\n            this.controls.enabled = true;\n            this.redraw();\n\n        };\n        dragControls.updateJoint = (joint, angle) => {\n\n            this.setJointValue(joint.name, angle);\n\n        };\n        dragControls.onHover = joint => {\n\n            highlightLinkGeometry(joint, false);\n            this.dispatchEvent(new CustomEvent('joint-mouseover', { bubbles: true, cancelable: true, detail: joint.name }));\n            this.redraw();\n\n        };\n        dragControls.onUnhover = joint => {\n\n            highlightLinkGeometry(joint, true);\n            this.dispatchEvent(new CustomEvent('joint-mouseout', { bubbles: true, cancelable: true, detail: joint.name }));\n            this.redraw();\n\n        };\n\n        this.dragControls = dragControls;\n\n    }\n\n    disconnectedCallback() {\n\n        super.disconnectedCallback();\n        this.dragControls.dispose();\n\n    }\n\n    attributeChangedCallback(attr, oldval, newval) {\n\n        super.attributeChangedCallback(attr, oldval, newval);\n\n        switch (attr) {\n\n            case 'highlight-color':\n                this.highlightMaterial.color.set(this.highlightColor);\n                this.highlightMaterial.emissive.set(this.highlightColor);\n                break;\n\n        }\n\n    }\n\n};\n","/* globals */\nimport * as THREE from 'three';\nimport { registerDragEvents } from './dragAndDrop.js';\nimport { STLLoader } from 'three/examples/jsm/loaders/STLLoader.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { ColladaLoader } from 'three/examples/jsm/loaders/ColladaLoader.js';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\nimport URDFManipulator from '../../src/urdf-manipulator-element.js';\n\ncustomElements.define('urdf-viewer', URDFManipulator);\n\n// declare these globally for the sake of the example.\n// Hack to make the build work with webpack for now.\n// TODO: Remove this once modules or parcel is being used\nconst viewer = document.querySelector('urdf-viewer');\n\nconst limitsToggle = document.getElementById('ignore-joint-limits');\nconst collisionToggle = document.getElementById('collision-toggle');\nconst radiansToggle = document.getElementById('radians-toggle');\nconst autocenterToggle = document.getElementById('autocenter-toggle');\nconst upSelect = document.getElementById('up-select');\nconst sliderList = document.querySelector('#controls ul');\nconst controlsel = document.getElementById('controls');\nconst controlsToggle = document.getElementById('toggle-controls');\nconst animToggle = document.getElementById('do-animate');\nconst hideFixedToggle = document.getElementById('hide-fixed');\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 1 / DEG2RAD;\nlet sliders = {};\n\n// Global Functions\nconst setColor = color => {\n\n    document.body.style.backgroundColor = color;\n    viewer.highlightColor = '#' + (new THREE.Color(0xffffff)).lerp(new THREE.Color(color), 0.35).getHexString();\n\n};\n\n// Events\n// toggle checkbox\nlimitsToggle.addEventListener('click', () => {\n    limitsToggle.classList.toggle('checked');\n    viewer.ignoreLimits = limitsToggle.classList.contains('checked');\n});\n\nradiansToggle.addEventListener('click', () => {\n    radiansToggle.classList.toggle('checked');\n    Object\n        .values(sliders)\n        .forEach(sl => sl.update());\n});\n\ncollisionToggle.addEventListener('click', () => {\n    collisionToggle.classList.toggle('checked');\n    viewer.showCollision = collisionToggle.classList.contains('checked');\n});\n\nautocenterToggle.addEventListener('click', () => {\n    autocenterToggle.classList.toggle('checked');\n    viewer.noAutoRecenter = !autocenterToggle.classList.contains('checked');\n});\n\nhideFixedToggle.addEventListener('click', () => {\n    hideFixedToggle.classList.toggle('checked');\n\n    const hideFixed = hideFixedToggle.classList.contains('checked');\n    if (hideFixed) controlsel.classList.add('hide-fixed');\n    else controlsel.classList.remove('hide-fixed');\n\n});\n\nupSelect.addEventListener('change', () => viewer.up = upSelect.value);\n\ncontrolsToggle.addEventListener('click', () => controlsel.classList.toggle('hidden'));\n\n// watch for urdf changes\nviewer.addEventListener('urdf-change', () => {\n\n    Object\n        .values(sliders)\n        .forEach(sl => sl.remove());\n    sliders = {};\n\n});\n\nviewer.addEventListener('ignore-limits-change', () => {\n\n    Object\n        .values(sliders)\n        .forEach(sl => sl.update());\n\n});\n\nviewer.addEventListener('angle-change', e => {\n\n    if (sliders[e.detail]) sliders[e.detail].update();\n\n});\n\nviewer.addEventListener('joint-mouseover', e => {\n\n    const j = document.querySelector(`li[joint-name=\"${ e.detail }\"]`);\n    if (j) j.setAttribute('robot-hovered', true);\n\n});\n\nviewer.addEventListener('joint-mouseout', e => {\n\n    const j = document.querySelector(`li[joint-name=\"${ e.detail }\"]`);\n    if (j) j.removeAttribute('robot-hovered');\n\n});\n\nlet originalNoAutoRecenter;\nviewer.addEventListener('manipulate-start', e => {\n\n    const j = document.querySelector(`li[joint-name=\"${ e.detail }\"]`);\n    if (j) {\n        j.scrollIntoView({ block: 'nearest' });\n        window.scrollTo(0, 0);\n    }\n\n    originalNoAutoRecenter = viewer.noAutoRecenter;\n    viewer.noAutoRecenter = true;\n\n});\n\nviewer.addEventListener('manipulate-end', e => {\n\n    viewer.noAutoRecenter = originalNoAutoRecenter;\n\n});\n\n// create the sliders\nviewer.addEventListener('urdf-processed', () => {\n\n    const r = viewer.robot;\n    Object\n        .keys(r.joints)\n        .sort((a, b) => {\n\n            const da = a.split(/[^\\d]+/g).filter(v => !!v).pop();\n            const db = b.split(/[^\\d]+/g).filter(v => !!v).pop();\n\n            if (da !== undefined && db !== undefined) {\n                const delta = parseFloat(da) - parseFloat(db);\n                if (delta !== 0) return delta;\n            }\n\n            if (a > b) return 1;\n            if (b > a) return -1;\n            return 0;\n\n        })\n        .map(key => r.joints[key])\n        .forEach(joint => {\n\n            const li = document.createElement('li');\n            li.innerHTML =\n            `\n            <span title=\"${ joint.name }\">${ joint.name }</span>\n            <input type=\"range\" value=\"0\" step=\"0.0001\"/>\n            <input type=\"number\" step=\"0.0001\" />\n            `;\n            li.setAttribute('joint-type', joint.jointType);\n            li.setAttribute('joint-name', joint.name);\n\n            sliderList.appendChild(li);\n\n            // update the joint display\n            const slider = li.querySelector('input[type=\"range\"]');\n            const input = li.querySelector('input[type=\"number\"]');\n            li.update = () => {\n                const degMultiplier = radiansToggle.classList.contains('checked') ? 1.0 : RAD2DEG;\n                let angle = joint.angle;\n\n                if (joint.jointType === 'revolute' || joint.jointType === 'continuous') {\n                    angle *= degMultiplier;\n                }\n\n                if (Math.abs(angle) > 1) {\n                    angle = angle.toFixed(1);\n                } else {\n                    angle = angle.toPrecision(2);\n                }\n\n                input.value = parseFloat(angle);\n\n                // directly input the value\n                slider.value = joint.angle;\n\n                if (viewer.ignoreLimits || joint.jointType === 'continuous') {\n                    slider.min = -6.28;\n                    slider.max = 6.28;\n\n                    input.min = -6.28 * degMultiplier;\n                    input.max = 6.28 * degMultiplier;\n                } else {\n                    slider.min = joint.limit.lower;\n                    slider.max = joint.limit.upper;\n\n                    input.min = joint.limit.lower * degMultiplier;\n                    input.max = joint.limit.upper * degMultiplier;\n                }\n            };\n\n            switch (joint.jointType) {\n\n                case 'continuous':\n                case 'prismatic':\n                case 'revolute':\n                    break;\n                default:\n                    li.update = () => {};\n                    input.remove();\n                    slider.remove();\n\n            }\n\n            slider.addEventListener('input', () => {\n                viewer.setJointValue(joint.name, slider.value);\n                li.update();\n            });\n\n            input.addEventListener('change', () => {\n                const degMultiplier = radiansToggle.classList.contains('checked') ? 1.0 : DEG2RAD;\n                viewer.setJointValue(joint.name, input.value * degMultiplier);\n                li.update();\n            });\n\n            li.update();\n\n            sliders[joint.name] = li;\n\n        });\n\n});\n\ndocument.addEventListener('WebComponentsReady', () => {\n\n    viewer.loadMeshFunc = (path, manager, done) => {\n\n        const ext = path.split(/\\./g).pop().toLowerCase();\n        switch (ext) {\n\n            case 'gltf':\n            case 'glb':\n                new GLTFLoader(manager).load(\n                    path,\n                    result => done(result.scene),\n                    null,\n                    err => done(null, err),\n                );\n                break;\n            case 'obj':\n                new OBJLoader(manager).load(\n                    path,\n                    result => done(result),\n                    null,\n                    err => done(null, err),\n                );\n                break;\n            case 'dae':\n                new ColladaLoader(manager).load(\n                    path,\n                    result => done(result.scene),\n                    null,\n                    err => done(null, err),\n                );\n                break;\n            case 'stl':\n                new STLLoader(manager).load(\n                    path,\n                    result => {\n                        const material = new THREE.MeshPhongMaterial();\n                        const mesh = new THREE.Mesh(result, material);\n                        done(mesh);\n                    },\n                    null,\n                    err => done(null, err),\n                );\n                break;\n\n        }\n\n    };\n\n    document.querySelector('li[urdf]').dispatchEvent(new Event('click'));\n\n    if (/javascript\\/example\\/bundle/i.test(window.location)) {\n        viewer.package = '../../../urdf';\n    }\n\n    registerDragEvents(viewer, () => {\n        setColor('#263238');\n        animToggle.classList.remove('checked');\n        updateList();\n    });\n\n});\n\n// init 2D UI and animation\nconst updateAngles = () => {\n\n    if (!viewer.setJointValue) return;\n\n    // reset everything to 0 first\n    const resetJointValues = viewer.angles;\n    for (const name in resetJointValues) {\n\n        if (Array.isArray(resetJointValues[name])) {\n\n            resetJointValues[name].fill(0);\n\n        } else {\n\n            resetJointValues[name] = 0;\n\n        }\n\n    }\n    viewer.setJointValues(resetJointValues);\n\n    // animate the legs\n    const time = Date.now() / 3e2;\n    for (let i = 1; i <= 6; i++) {\n\n        const offset = i * Math.PI / 3;\n        const ratio = Math.max(0, Math.sin(time + offset));\n\n        viewer.setJointValue(`HP${ i }`, THREE.MathUtils.lerp(30, 0, ratio) * DEG2RAD);\n        viewer.setJointValue(`KP${ i }`, THREE.MathUtils.lerp(90, 150, ratio) * DEG2RAD);\n        viewer.setJointValue(`AP${ i }`, THREE.MathUtils.lerp(-30, -60, ratio) * DEG2RAD);\n\n        viewer.setJointValue(`TC${ i }A`, THREE.MathUtils.lerp(0, 0.065, ratio));\n        viewer.setJointValue(`TC${ i }B`, THREE.MathUtils.lerp(0, 0.065, ratio));\n\n        viewer.setJointValue(`W${ i }`, window.performance.now() * 0.001);\n\n    }\n\n};\n\nconst updateLoop = () => {\n\n    if (animToggle.classList.contains('checked')) {\n        updateAngles();\n    }\n\n    requestAnimationFrame(updateLoop);\n\n};\n\nconst updateList = () => {\n\n    document.querySelectorAll('#urdf-options li[urdf]').forEach(el => {\n\n        el.addEventListener('click', e => {\n\n            const urdf = e.target.getAttribute('urdf');\n            const color = e.target.getAttribute('color');\n\n            viewer.up = '-Z';\n            document.getElementById('up-select').value = viewer.up;\n            viewer.urdf = urdf;\n            animToggle.classList.add('checked');\n            setColor(color);\n\n        });\n\n    });\n\n};\n\nupdateList();\n\ndocument.addEventListener('WebComponentsReady', () => {\n\n    animToggle.addEventListener('click', () => animToggle.classList.toggle('checked'));\n\n    // stop the animation if user tried to manipulate the model\n    viewer.addEventListener('manipulate-start', e => animToggle.classList.remove('checked'));\n    viewer.addEventListener('urdf-processed', e => updateAngles());\n    updateLoop();\n    viewer.camera.position.set(-5.5, 3.5, 5.5);\n\n});\n"],"names":["dataTransferToFiles","dataTransfer","files","recurseDirectory","item","resolve","file","reader","promises","readNextEntries","et","e","dtitems","dtfiles","i","entry","f","registerDragEvents","viewer","callback","cleanFilePath","path","acc","el","fileNames","n","url","cleaned","fileName","name","len","bloburl","filesNames","availableModels","urdfOptionsContainer","model","li","_object_pattern","_material_library_pattern","_material_use_pattern","_map_use_pattern","_face_vertex_data_separator_pattern","_vA","Vector3","_vB","_vC","_ab","_cb","_color","Color","ParserState","state","fromDeclaration","previousMaterial","libraries","previous","material","index","cloned","end","lastMultiMaterial","mi","declared","value","a","b","c","src","dst","ua","ub","uc","na","nb","nc","vLen","ia","ib","ic","nLen","uvLen","vertices","vi","l","uvs","uvi","OBJLoader","Loader","manager","onLoad","onProgress","onError","scope","loader","FileLoader","text","materials","lines","result","line","lineFirstChar","data","vertexData","faceVertices","j","jl","vertex","vertexParts","v1","v2","v3","lineParts","lineVertices","lineUVs","llen","parts","pointData","container","Group","object","geometry","isLine","isPoints","hasVertexColors","buffergeometry","BufferGeometry","Float32BufferAttribute","createdMaterials","miLen","sourceMaterial","materialHash","LineBasicMaterial","materialLine","Material","PointsMaterial","materialPoints","MeshPhongMaterial","mesh","LineSegments","Points","Mesh","points","tempVec2","THREE.Vector2","emptyRaycast","URDFViewer","val","values","joint","v","scene","THREE.Scene","ambientLight","THREE.HemisphereLight","dirLight","THREE.DirectionalLight","renderer","THREE.WebGLRenderer","THREE.PCFSoftShadowMap","THREE.SRGBColorSpace","camera","THREE.PerspectiveCamera","world","THREE.Object3D","plane","THREE.Mesh","THREE.PlaneGeometry","THREE.ShadowMaterial","THREE.DoubleSide","controls","OrbitControls","_renderLoop","styletag","attr","oldval","newval","r","w","h","currSize","jointName","robot","bbox","THREE.Box3","center","THREE.Vector3","minmax","THREE.Sphere","cam","offset","pkg","urdf","requestId","updateMaterials","mats","m","THREE.MeshBasicMaterial","THREE.MeshPhongMaterial","map","split","x","pkgName","pkgPath","THREE.LoadingManager","URDFLoader","showCollision","collisionMaterial","colliders","coll","up","sign","axis","PI","HALFPI","ignore","dispatch","URDFManipulator","args","isJoint","highlightLinkGeometry","revert","traverse","dragControls","PointerURDFDragControls","angle","limitsToggle","collisionToggle","radiansToggle","autocenterToggle","upSelect","sliderList","controlsel","controlsToggle","animToggle","hideFixedToggle","DEG2RAD","RAD2DEG","sliders","setColor","color","THREE.Color","sl","originalNoAutoRecenter","da","db","delta","key","slider","input","degMultiplier","done","GLTFLoader","err","ColladaLoader","STLLoader","updateList","updateAngles","resetJointValues","time","ratio","THREE.MathUtils","updateLoop"],"mappings":"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","x_google_ignoreList":[1]}